# syntax=docker/dockerfile:1

FROM golang:1.18.1-alpine3.15
WORKDIR /app

COPY . .
RUN go mod download
RUN go build -o /api

EXPOSE 8080

ENV DATABASE_USER_NAME=root
ENV DATABASE_PASSWORD=my4qLp455w0rd
ENV DATABASE_HOST=cart-mysql
ENV DATABASE_PORT=33060
ENV DATABASE_SCHEMA=cart
ENV DATABASE_CHARSET=utf8mb4
ENV DATABASE_PARSE_TIME=True
ENV DATABASE_LOC=Local

ENV AUTH_TOKEN_SIGNING_KEY=4h0pp1ngk4r7
ENV AUTH_TOKEN_EXPIRATION_SECONDS=7200

ENV SERVER_PORT=:8080

CMD [ "/api" ]